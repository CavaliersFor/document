### 正排索引

- 文档id到文档内容、单词的关联关系

  | 文档id |            文档内容             |
  | :----: | :-----------------------------: |
  |   1    | elasticsearch是最流行的搜索引擎 |
  |   2    |      php是世界上最好的语言      |
  |   3    |      搜索引擎是如何诞生的       |


### 倒排索引

- 单词到文档id的关联关系

|     单词      | 文档id列表 |
| :-----------: | :--------: |
| elasticsearch |     1      |
|     流行      |     1      |
|   搜索引擎    |    1,3     |
|      php      |     2      |
|     世界      |     2      |
|     最好      |     2      |
|     语言      |     2      |
|     如何      |     3      |
|     诞生      |     3      |

上面的表格就是正排索引转换成倒排索引的

![正派索引和倒排索引的关系](../../pic/es/正派索引和倒排索引的关系.jpg)

#### 倒排索引-查询流程

- 查询包含“搜索引擎”的文档
  - 通过倒排索引获得“搜索引擎”对应的文档有1和3
  - 通过正排索引查询1和3的完整内容
  - 返回结果